---
import { slugToCanonical } from "@/utils/content";
import { type Language, getPageNameFromURL } from "@/utils/i18n";

interface Params {
  lang: Language;
  slug: string;
}

const { lang, slug } = Astro.params as unknown as Params;

const found = getPageNameFromURL(lang, slug);
console.log("found", found);
if (found){
  return Astro.redirect(slugToCanonical(found, Astro.url.origin))
} else {
  return Astro.redirect(`/404?from=${lang}/${slug}`)
}

---