---
import { slugToCanonical } from "@/utils/content";
import { type Language, getPageNameFromURL } from "@/utils/i18n";

interface Params {
  lang: Language;
  slug: string;
}

const { lang, slug } = Astro.params as unknown as Params;

const found = getPageNameFromURL(lang, slug);

return found ? Astro.redirect(slugToCanonical(found, Astro.url.origin)) : Astro.redirect(`/404?from=${lang}/${slug}`);
---