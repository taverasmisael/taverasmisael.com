---
import { DEFAULT_LOCALE } from "@/utils/i18n";
import { isSupportedLang } from "@/utils/i18n";

const headerLang = Astro.request.headers.get("accept-language");
if (headerLang) {
  const browserLang = headerLang.split(",")[0].split("-")[0];
  const lang = isSupportedLang(browserLang) ? browserLang : DEFAULT_LOCALE;
  return Astro.redirect(`/${lang}`);
}

return Astro.redirect(`/${DEFAULT_LOCALE}`);
---
